(function(){function r(e,t,n,r,i,s,o){this._index=0;this.canvas=o;this.dir=i||"horizontal";this.frames=s;this.pos=r||[0,0];this.size=t;this.frequency=n||0;this.url=e;this.runAnimation=true;this.reverseAnimation=false}function s(e){if(!e){if(!i.canvas)throw"Error: Canvas element not specified."}else{if(i.canvas){if(e.nodeName!="CANVAS"&&i.canvas.nodeName!="CANVAS")throw"Element specified must be a canvas element."}else{if(e.nodeName!="CANVAS")throw"Element specified must be a canvas element."}}}function o(){if(!i.id)throw"You must provide an object id."}function u(){var e=false;if(!(t.now%10)&&!(t.now%6)&&!(t.now%8))e=true;return e}function a(){t.now=Date.now();t.dt=(t.now-t.last)/1e3;t.last=t.now;f(t.dt);l(t.dt);c();if(n.logfps&&u())console.log("Running at "+Math.round(1e3/(t.dt*1e3))+" FPS");if(!n._reset&&!n._paused)e(a)}function f(e){if(i.inputRules.length){for(var t=0;t<i.inputRules.length;t++){i.inputRules[t].call(i)}}}function l(e){if((n.useSingleCanvasMode||i.canvases.length==1)&&i.canvas)i.ctx.clearRect(0,0,i.canvas.width,i.canvas.height);else if(i.canvases.length>1){for(var r=0;r<i.canvases.length;r++){var s=i.canvases[r];var o=s.getContext("2d");o.clearRect(0,0,s.width,s.height)}}for(var r=0;r<i.objects.length;r++){if(i.objects[r].settings.type=="sprite")i.objects[r].sprite.update(e)}t.ellapsed++}function c(){var e;for(var t=0;t<i.canvases.length;t++){e=i.canvases[t].getContext("2d");for(var n=0;n<i.canvases[t].objects.length;n++){e.save();e.translate(i.canvases[t].objects[n].x,i.canvases[t].objects[n].y);if(i.canvases[t].objects[n].settings.type=="sprite"){if(!i.canvases[t].objects[n].isHidden)i.canvases[t].objects[n].sprite.render(e)}else if(!i.canvases[t].objects[n].isHidden)i.canvases[t].objects[n].render(e);e.restore()}}}function h(e){n._reset=false;var t=i;i.id=null;if(e&&typeof e=="object")i.setCanvas(e);else if(typeof e=="string"){i.id=e;if(i.entityExists[e]){if(i.entities[e])t=i.entities[e];else{if(i.pending[e])t=i.pending[e];else t=i}}else t=i;if(!i.entityExists[i.id])i.entityExists[i.id]=true}return t}var e=function(){return window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){setTimeout(t,1e3/60)}}(),t={dt:null,now:Date.now(),last:Date.now(),ellapsed:0},n={_reset:false,_mainCalled:false,_paused:false,logfps:false,runAnimation:true,useSingleCanvasMode:false};r.prototype.update=function(e){this._index+=this.frequency*e};r.prototype.render=function(e){var t=this.frames.length;var n=Math.floor(this._index);var r=this.frames[n%t];var s=this.pos[0],o=this.pos[1];if(!this.runAnimation){if(this.reverseAnimation)r=this.frames.length-1;else r=0}if(this.dir=="horizontal")s+=this.size[0]*r;else o+=this.size[1]*r;e.drawImage(i.resources[this.url],s,o,this.size[0],this.size[1],0,0,this.size[0],this.size[1])};var i={canvas:null,canvases:[],ctx:null,entities:{},entityExists:{},entityReadyEvents:{},eventQueue:{},extensions:{},id:null,keys:{},loaded:false,inputRules:[],objects:[],pending:{length:0},readyEvents:[],resources:{},events:{click:function(e){o();if(!i.eventQueue[i.id])i.eventQueue[i.id]=[];i.eventQueue[i.id].push(e);if(i.loaded&&i.entities[i.id])i.sharedEvents.click.call(this,e)},freeze:function(){},getHeight:function(){return this.sprite.size[1]},getSpriteWidth:function(){return this.sprite.src.width||this.settings.size[0]},getSpriteX:function(){return this.sprite.pos[0]},getSpriteY:function(){return this.sprite.pos[1]},getWidth:function(){return this.sprite.size[0]},load:function(e){o();if(!i.entityReadyEvents[i.id])i.entityReadyEvents[i.id]=[];i.entityReadyEvents[i.id].push(e);if(i.loaded&&i.entities[i.id])e.call(i.entities[i.id])},onclick:function(e){this.click(e)},resumeAnimation:function(){this.sprite.runAnimation=true},reverseAnimation:function(e){var t=[];if(e){this.sprite.reverseAnimation=true;for(var n=this.sprite.frames.length-1;n>=0;n--){t.push(n)}}else{this.sprite.reverseAnimation=false;for(var n=0;n<this.sprite.frames.length;n++){t.push(n)}}this.sprite.frames=t},setFrames:function(e){if(e instanceof Array)this.sprite.frames=e},setFrequency:function(e){this.sprite.frequency=e},setSpriteX:function(e){this.sprite.pos[0]=e},setSpriteY:function(e){this.sprite.pos[1]=e},sprite:function(){throw"Error: An object with that id already exists."},stopAnimation:function(){this.sprite.runAnimation=false},unfreeze:function(){this.resumeAnimation()}},sharedEvents:{click:function(e){var t=this;this.canvas.addEventListener("click",function(n){var r=n.pageX-this.getBoundingClientRect().left;var i=n.pageY-this.getBoundingClientRect().top;if(r>=t.x&&r<=t.x+t.settings.size[0]&&i>=t.y&&i<=t.y+t.settings.size[1]){e.call(t)}})},decreaseX:function(e){if(e)this.x-=this.speed*t.dt*e;else this.x-=this.speed*t.dt},decreaseY:function(e){if(e)this.y-=this.speed*t.dt*e;else this.y-=this.speed*t.dt},extend:function(e,t){o();if(!i.extensions[i.id])i.extensions[i.id]={};i.extensions[i.id][e]=t;if(i.loaded&&i.entities[i.id])i.entities[i.id][e]=t},extendType:function(e,t){if(this.settings.type=="sprite")i.events[e]=t;else if(this.settings.type=="line")i.lineEvents[e]=t;else if(this.settings.type=="rect")i.rectEvents[e]=t},getLineWidth:function(){if(this.settings.type=="sprite")return 0;return this.settings.width},getWidth:function(){return this.settings.size[0]||this.getLineWidth()},getX:function(){return this.x},getY:function(){return this.y},hide:function(){this.isHidden=true},increaseX:function(e){if(e)this.x+=this.speed*t.dt*e;else this.x+=this.speed*t.dt},increaseY:function(e){if(e)this.y+=this.speed*t.dt*e;else this.y+=this.speed*t.dt},load:function(e){e.call(this)},remove:function(){},show:function(){this.isHidden=false},setSpeed:function(e){this.speed=e},setWidth:function(e){if(this.settings.type=="line")this.settings.width=e;else if(this.settings.type=="sprite")this.sprite.size[0]=e;else this.settings.size[0]=e},setX:function(e){this.x=e},setY:function(e){this.y=e},toggleHide:function(){if(this.isHidden)this.isHidden=false;else this.isHidden=true}},lineEvents:{getHeight:function(){this.getLength()},getLength:function(){var e=0;e=this.settings.toY-this.getY();return e||0},render:function(e){e.lineWidth=this.settings.width;e.strokeStyle=this.settings.color;e.beginPath();e.moveTo(0,0);e.lineTo(this.settings.toX,this.settings.toY);e.stroke()}},rectEvents:{getFillColor:function(){return this.settings.fillColor||false},getHeight:function(){return this.settings.size[1]},getWidth:function(){return this.settings.size[0]},setFillColor:function(e){this.settings.fillColor=e},render:function(e){e.beginPath();e.lineWidth=this.settings.width;if(this.settings.color)e.strokeStyle=this.settings.color;if(this.settings.fillColor)e.fillStyle=this.settings.fillColor;e.rect(this.x,this.y,this.settings.size[0],this.settings.size[1]);if(this.settings.color)e.stroke();if(this.settings.fillColor)e.fill()}},addInputRule:function(e){i.inputRules.push(e)},addObject:function(e,t){if(t)i.entities[t]=e;i.objects.push(e);i.canvases[e._index].objects.push(e)},getObject:function(e){return i.entities[e]},getObjects:function(){return i.canvases[i.canvas._index].objects},hasInput:function(){var e=false,t=0,n;for(n in i.keys){if(i.keys[n])t++}if(t)e=true;return e},hasInputs:function(e){var t=0,n=false;if(e instanceof Array){for(var r=0;r<e.length;r++){if(this.keys[e[r]])t++}}else{}if(t==e.length)n=true;return n},hasInputKey:function(e){return i.keys[e]},load:function(e){i.readyEvents.push(e)},logfps:function(){if(!n._mainCalled)console.log("WARNING: To conserve resources, no frames will be logged until objects are added to the canvas.");n.logfps=true},pause:function(){n._paused=true},reset:function(){n._reset=true;this.canvas.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height);t.dt=null;t.now=Date.now();t.last=Date.now();t.ellapsed=0;n._mainCalled=false;n.logfps=false;n.runAnimation=true;n.useSingleCanvasMode=false;this.canvases=[];this.canvas=null;this.ctx=null;this.entities={};this.entityExists={};this.entityReadyEvents={};this.eventQueue={};this.extensions={};this.id=null;this.keys={};this.loaded=false;this.inputRules=[];this.objects=[];this.pending={length:0};this.readyEvents=[];this.resources={}},resume:function(){n._paused=false;a()},resumeAnimation:function(e){var t=e||i.canvases[i.canvas._index];if(!t.runAnimation){t.runAnimation=true;var n=t.objects;for(var r=0;r<n.length;r++){if(n[r].settings.type=="sprite")n[r].sprite.runAnimation=true}}},stopAnimation:function(e){var t=e||i.canvases[i.canvas._index];if(t.runAnimation){t.runAnimation=false;var n=t.objects;for(var r=0;r<n.length;r++){if(n[r].settings.type=="sprite")n[r].sprite.runAnimation=false}}},setCanvas:function(e){s(e);if(this.canvases.length){this.canvases[this.canvases.length-1].isCurrent=false;if(this.canvas){for(var t=0;t<this.canvas.objects.length;t++){this.canvases[this.canvases.length-1].objects[t]=this.canvas.objects[t]}}}this.canvas=e;this.canvas._index=this.canvases.length;this.canvas.runAnimation=true;this.canvases.push(e);this.canvases[this.canvases.length-1].objects=[];this.canvases[this.canvases.length-1].isCurrent=true;this.ctx=e.getContext("2d");this.canvas.tabIndex="1";this.canvas.addEventListener("keydown",function(e){e.preventDefault();i.keys[e.keyCode]=true});this.canvas.addEventListener("keyup",function(e){i.keys[e.keyCode]=false})},useSingleCanvasMode:function(){n.useSingleCanvasMode=true},line:function(e,t,r,o,u){s();var f={type:"line",x:0,y:0,color:"black",speed:16,toX:100,toY:100,width:1};if(typeof e=="object"){for(var l in e){f[l]=e[l]}}else{f.x=e||0;f.y=t||0;f.toX=r||e;f.toY=o||t;f.color=u||"black"}var c={_index:i.canvases.length-1,x:f.x,y:f.y,id:i.id,speed:f.speed,settings:f,canvas:i.canvas,ctx:i.canvas.getContext("2d")};var h={};for(var l in i.sharedEvents){h[l]=i.sharedEvents[l]}for(var l in i.lineEvents){h[l]=i.lineEvents[l]}for(var l in h){if(!c[l])c[l]=h[l]}i.addObject(c,i.id);i.pending.length++;if(!n._mainCalled)n._mainCalled=true,a()},rect:function(e,t,r,o,u,f){s();var l={type:"rect",x:0,y:0,size:[200,100],fillColor:null,color:"black",speed:16,width:1};if(typeof e=="object"){for(var c in e){l[c]=e[c]}}else{l.x=e||0;l.y=t||0;l.size[0]=r||e;l.size[1]=o||t;l.color=u||null;l.fillColor=f||null}var h={_index:i.canvases.length-1,x:l.x,y:l.y,id:i.id,speed:l.speed,settings:l,canvas:i.canvas,ctx:i.canvas.getContext("2d")};var p={};for(var c in i.sharedEvents){p[c]=i.sharedEvents[c]}for(var c in i.rectEvents){p[c]=i.rectEvents[c]}for(var c in p){if(!h[c])h[c]=p[c]}i.addObject(h,i.id);i.pending.length++;if(!n._mainCalled)n._mainCalled=true,a()},image:function(e,t,n){var r={type:"image",id:null,src:null,size:null,speed:100,frequency:16,position:[0,0],direction:"horizontal",frames:[0],x:0,y:0};if(typeof e=="object"){for(var i in e){r[i]=e[i]}}else{r.src=e;r.x=t;r.y=n}this.sprite(r)},sprite:function(e,t,o,u,f,l){s();var c={type:"sprite",id:null,src:null,size:null,speed:100,frequency:16,position:[0,0],direction:"horizontal",frames:null,reverse:false,logfps:false,x:0,y:0};if(typeof e=="object"){for(var h in e){c[h]=e[h]}}else{c.src=e;c.size=t;c.frequency=o;c.position=u;c.direction=f;c.frames=l}if((!c.src||!c.size)&&c.type=="sprite")throw"You must provide a sprite source and size.";if(c.id)i.id=c.id;var p={_index:i.canvases.length-1,id:i.id,x:c.x,y:c.y,speed:c.speed,settings:c,image:new Image,canvas:i.canvas,ctx:i.canvas.getContext("2d"),sprite:null};var d={};for(var h in i.sharedEvents){d[h]=i.sharedEvents[h]}for(var h in i.events){d[h]=i.events[h]}for(var h in d){if(!p[h])p[h]=d[h]}i.pending.length++;i.pending[i.id]=p;i.pending[i.id].image.src=c.src;i.pending[i.id].image.id=i.id;i.pending[i.id].image.addEventListener("load",function(){var e=i.pending[this.id];if(!e.settings.frames){e.settings.frames=[];var t=Math.floor(this.width/e.settings.size[0]);if(e.settings.reverse){e.sprite.reverseAnimation=true;for(var s=t-1;s>=0;s--){e.settings.frames.push(s)}}else{for(var s=0;s<t;s++){e.settings.frames.push(s)}}}if(!e.settings.size){e.settings.size=[];e.settings.size[0]=this.width;e.settings.size[1]=this.height}if(e.settings.type=="image")e.settings.type="sprite";if(e.settings.x=="center")e.settings.x=e.canvas.width/2-e.settings.size[0]/2;else if(e.settings.x=="right")e.settings.x=e.canvas.width-e.settings.size[0];else if(e.settings.x=="left"||!e.settings.x||typeof e.settings.x=="string")e.settings.x=0;if(e.settings.y=="center")e.settings.y=e.canvas.height/2-e.settings.size[1]/2;else if(e.settings.y=="bottom")e.settings.y=e.canvas.height-e.settings.size[1];else if(e.settings.y=="top"||!e.settings.y||typeof e.settings.y=="string")e.settings.y=0;e.x=e.settings.x;e.y=e.settings.y;e.sprite=new r(e.settings.src,e.settings.size,e.settings.frequency,e.settings.position,e.settings.direction,e.settings.frames,e.canvas);i.addObject(e,e.id);i.resources[e.settings.src]=this;if(i.eventQueue[e.id]){var o=i.eventQueue[e.id];i.entities[e.id].hasEvent=true;e.canvas.addEventListener("click",function(t){var n=t.pageX-this.getBoundingClientRect().left;var r=t.pageY-this.getBoundingClientRect().top;if(n>=e.x&&n<=e.x+e.settings.size[0]&&r>=e.y&&r<=e.y+e.settings.size[1]){for(var i=0;i<o.length;i++){o[i].call(e,t)}}})}if(i.extensions[e.id]){for(var s in i.extensions[e.id]){e[s]=i.extensions[e.id][s]}}if(i.entityReadyEvents[e.id]){for(var s=0;s<i.entityReadyEvents[e.id].length;s++){i.entityReadyEvents[e.id][s].call(e)}}if(!i.loaded){if(i.objects.length==i.pending.length){for(var s=0;s<i.readyEvents.length;s++){i.loaded=true;i.readyEvents[s].call(i)}}}if(!n._mainCalled)n._mainCalled=true,a()})}};window.Lib=function(e){return h(e)}})(window,document)
var objects=[];objects.push(document.createElement("div"));objects.push(document.createElement("div"));objects.push(document.createElement("canvas"));objects[0].id="syntax";objects[0].className="note";objects[0].innerHTML=Site.getDemoSyntax();objects[1].id="preview";objects[1].className="note note-back";objects[2].appendTo=objects[1];objects[2].addEventListener("focus",function(){Site.canvasFocused=true});objects[2].addEventListener("blur",function(){Site.canvasFocused=false});window.addEventListener("load",function(){if(window.location.href.split("//")[1].split("/")[2]!="juan"&&window.location.href.split("//")[1].indexOf("techboxcoding")==-1&&window.location.href.split("//")[1].indexOf("juanjvallejo")==-1){window.Lib=null;throw"Validation Error: You are using an unauthorized copy of Lib.js."}Site.loaded=true;Site.manageMenuLabels();var e=document.getElementById("note-wrapper");if(e){for(var t=0;t<objects.length;t++){if(!objects[t].appendTo)e.appendChild(objects[t]);else objects[t].appendTo.appendChild(objects[t])}objects[2].width=objects[2].appendTo.clientWidth;objects[2].height=objects[2].appendTo.clientHeight;Site.manageNotes()}Site.resizeDocContent();Site.parseCodeSamples("doc-content");Site.parseCodeSamples("demo-wrapper");Site.parseCodeSamples(objects[0]);Site.manageCompatibilityIcons();Site.manageSidebar()});window.addEventListener("resize",function(){if(Site.loaded){Site.manageNotes();Site.resizeDocContent()}});var MY_CANVAS_ELEMENT=objects[2]