(function($){$.fn.bounce=function(limit,options,fn){if(typeof options=='function'){fn=options}else if(typeof limit=='function'){fn=limit;limit=1}if(limit===null){limit=1}var object=null;var intModifier=1;var count=0;var increment=Math.PI/100;var i=0;var time=null;var alg=0;var bounceCount=0;var settings={speed:1,height:1,spring:false};var getObjPosition=this.css('position');if(getObjPosition=="static"){this.css({'position':'relative'})}if(getObjectClip(this)){var objectClip=getObjectClip(this);if(getObjectClip(this)=="top"){intModifier=-1}}else{var objectClip="bottom"}$.extend(settings,options);if(settings.spring===true){settings.spring=2}else{settings.spring=1}this.each(function(){bounce($(this))});function bounce(obj){if(object===null){object=obj}alg=parseInt((Math.round(Math.sin(count)*100000)/100000)*(20))*settings.height;alg*=intModifier;object.css(objectClip,alg+"px");count+=(increment*settings.speed);i+=parseFloat("0.0"+settings.speed);if(i<=settings.spring){time=setTimeout(bounce,1)}else{i=0;count=0;alg=0;if(bounceCount<limit-1){bounceCount++;time=setTimeout(bounce,1)}else{clearTimeout(time);i=0;count=0;alg=0;bounceCount=0;if(fn!==undefined){fn.call(object)}object=null}}}function getObjectClip(object){if(object.css('top')=="0px"){return"top"}else if(object.css('bottom')=="0px"){return"bottom"}else{return false}}}})(jQuery);